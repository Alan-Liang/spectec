def $funcaddr(state) : funcaddr*      hint(show %.MODULE.FUNCS)
def $funcaddr((s; f)) = f.MODULE.FUNCS


def $local(state, localidx) : val           hint(show %.LOCALS[%])
def $local((s; f), x) = f.LOCALS[x]

def $with_local(state, localidx, val) : state               hint(show %[.LOCALS[%] = %])
def $with_local((s; f), x, v) = s; f[.LOCALS[x] = v]

def $funcinst(state) : funcinst*      hint(show %.FUNCS)
def $funcinst((s; f)) = s.FUNCS