(rule
  (targets coq_output.v)
  (deps
    (file ../watsup)
    (glob_files ../spec/*.watsup)
  )
  (action
    (progn
      (with-stdout-to coq_output.v (run %{deps} --coq))
      (run coqdoc coq_output.v)
    )
  )
)